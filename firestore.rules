rules_version = '2';

service cloud.firestore {
  match /databases/{database}/documents {
    
    // Products collection
    match /products/{productId} {
      // Allow anyone to read products
      allow read: if true;
      
      // Allow anyone to create, update, delete products (adjust based on your auth requirements)
      allow create, update, delete: if true;
    }
    
    // Orders collection
    match /orders/{orderId} {
      // Allow anyone to read orders
      allow read: if true;
      
      // Allow anyone to create, update, delete orders (adjust based on your auth requirements)
      allow create, update, delete: if true;
    }
    
    // Order items collection
    match /order_items/{itemId} {
      // Allow anyone to read order items
      allow read: if true;
      
      // Allow anyone to create, update, delete order items (adjust based on your auth requirements)
      allow create, update, delete: if true;
    }
    
    // Settings collection
    match /settings/{settingId} {
      // Allow anyone to read settings
      allow read: if true;
      
      // Allow anyone to create, update, delete settings (adjust based on your auth requirements)
      allow create, update, delete: if true;
    }
    
    // Archived orders collection
    match /archived_orders/{archiveId} {
      // Allow anyone to read archived orders
      allow read: if true;
      
      // Allow anyone to create archived orders (for automatic archiving)
      allow create: if true;
      
      // Prevent deletion and updates of archived orders (read-only after creation)
      allow update, delete: if false;
    }
    
    // Archive metadata collection
    match /archive_metadata/{metadataId} {
      // Allow anyone to read archive metadata
      allow read: if true;
      
      // Allow anyone to create archive metadata
      allow create: if true;
      
      // Prevent deletion and updates of archive metadata
      allow update, delete: if false;
    }
  }
}
